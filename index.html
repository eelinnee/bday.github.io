<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êôöüß∏‡æÄùúóùúö‚ãÜ‚ÇäÀö –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</title>
    <meta name="description" content="–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è 26 –∞–≤–≥—É—Å—Ç–∞">

    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Preload –≤–∞–∂–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Prata&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="KosolapaScript-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="background.jpg" as="image">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prata&display=swap" rel="stylesheet">
    
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Prata&display=swap" rel="stylesheet">
    </noscript>

    <style>
        /* CSS –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ç–∞–∫–∏–º –∂–µ, –Ω–æ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏ */
        
        /* –î–æ–±–∞–≤–ª—è–µ–º will-change –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π */
        .letter,
        .lid,
        .pin,
        .ticket,
        .confetti,
        .sound-waves {
            will-change: transform, opacity;
        }
        
        /* –£–ª—É—á—à–∞–µ–º –ø–ª–∞–≤–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π */
        .letter {
            transform: translateY(0);
            transition: transform 0.5s cubic-bezier(0.18, 1.25, 0.4, 1), 
                        box-shadow 0.3s ease;
        }
        
        /* –£–ª—É—á—à–∞–µ–º accessibility –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        .modal:not([hidden]) {
            display: flex;
        }
        
        /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
        .modal {
            z-index: 10000;
        }
        
        /* –£–ª—É—á—à–∞–µ–º –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ */
        .address-info {
            background-color: #f8e8e8;
            color: #4a3a3a;
        }
        
        /* –£–ª—É—á—à–∞–µ–º —Ñ–æ–∫—É—Å–∏—Ä—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .ticket-btn:focus,
        .close-btn:focus,
        .pin:focus {
            outline: 2px solid #a76c6e;
            outline-offset: 2px;
        }
        
        /* –£–ª—É—á—à–∞–µ–º —á–∏—Ç–∞–µ–º–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ */
        .modal-content {
            line-height: 1.6;
        }
        
        /* –£–ª—É—á—à–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è */
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* –£–ª—É—á—à–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é confetti */
        @keyframes confettiFall {
            0% {
                transform: translate3d(0, -100vh, 0) rotate(0deg);
                opacity: 1;
            }
           100% {
                transform: translate3d(0, 100vh, 0) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* –£–ª—É—á—à–∞–µ–º –ø–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–∞ */
        @keyframes typing {
            from {
                width: 0;
                opacity: 1;
            }
            to {
                width: 100%;
                opacity: 1;
            }
        }
        
        /* –£–ª—É—á—à–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –±–∏–ª–µ—Ç–∞ */
        @keyframes printTicket {
            0% {
                transform: translateY(-100%) scale(0.9);
                opacity: 0;
            }
            30% {
                transform: translateY(-70%) scale(0.95);
                opacity: 0.5;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ */
        .hint {
            position: fixed;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px 20px;
            box-shadow: 0 5px 25px rgba(167, 108, 110, 0.3);
            z-index: 10002;
            max-width: 250px;
            font-family: 'Prata', serif;
            color: #a76c6e;
            font-size: 16px;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
            pointer-events: none;
        }
        
        .hint.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .hint::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.95);
            transform: rotate(45deg);
        }
        
        .hint-top::after {
            bottom: -10px;
            left: 50%;
            margin-left: -10px;
        }
        
        .hint-bottom::after {
            top: -10px;
            left: 50%;
            margin-left: -10px;
        }
        
        .hint-left::after {
            right: -10px;
            top: 50%;
            margin-top: -10px;
        }
        
        .hint-right::after {
            left: -10px;
            top: 50%;
            margin-top: -10px;
        }
        
        .hint-close {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 18px;
            cursor: pointer;
            pointer-events: all;
        }
    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.00-beta3/css/all.min.css" media="print" onload="this.media='all'">
</head>

<body>
    <!-- –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <main>
        <div class="wrapper" id="envelopeWrapper" role="region" aria-label="–ö–æ–Ω–≤–µ—Ä—Ç —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ–º">
            <div class="lid one"></div>
            <div class="pin" onclick="openEnvelope()" role="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç" tabindex="0">
                <i id="pinMusicIcon" class="music-icon fas fa-music" aria-hidden="true"></i>
            </div>
            <div class="lid two"></div>
            <div class="envelope"></div>
            <div class="letter" onclick="openModal()" role="button" aria-label="–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ" tabindex="0">
                <p>–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</p>
            </div>
        </div>
    </main>

    <div id="congratulationModal" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()" role="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</span>
            <h2 id="modalTitle">–£–≤–∞–∂–∞–µ–º—ã–π –≥–æ—Å—Ç—å!</h2>

            <div class="congratulation-text">
                <p>–°–æ–≤—Å–µ–º —Å–∫–æ—Ä–æ —É–∂–µ <b>26 –∞–≤–≥—É—Å—Ç–∞</b>, –∏ —è –ø—Ä–∏–≥–ª–∞—à–∞—é <b>—Ç–µ–±—è</b> —Ä–∞–∑–¥–µ–ª–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π –¥–µ–Ω—å
                    –≤–º–µ—Å—Ç–µ —Å–æ –º–Ω–æ–π!</p>

                <div class="countdown-container">
                    <div class="countdown-title">–î–æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –æ—Å—Ç–∞–ª–æ—Å—å:</div>
                    <div class="countdown" role="timer" aria-live="polite">
                        <div class="countdown-item">
                            <div id="days" class="countdown-number">00</div>
                            <div class="countdown-label">–¥–Ω–µ–π</div>
                        </div>
                        <div class="countdown-item">
                            <div id="hours" class="countdown-number">00</div>
                            <div class="countdown-label">—á–∞—Å–æ–≤</div>
                        </div>
                        <div class="countdown-item">
                            <div id="minutes" class="countdown-number">00</div>
                            <div class="countdown-label">–º–∏–Ω—É—Ç</div>
                        </div>
                        <div class="countdown-item">
                            <div id="seconds" class="countdown-number">00</div>
                            <div class="countdown-label">—Å–µ–∫—É–Ω–¥</div>
                        </div>
                    </div>
                </div>

                <div class="address-info">
                    <p>üìÖ <strong>–î–∞—Ç–∞:</strong> 26 –∞–≤–≥—É—Å—Ç–∞</p>
                    <p>üìç <strong>–ê–¥—Ä–µ—Å:</strong> —É–ª. –®–µ–∫—Å–Ω–∏–Ω—Å–∫–∞—è, –¥. 46, 3 –ø–æ–¥—ä–µ–∑–¥, –∫–≤. 87</p>
                    <p>‚è∞ <strong>–í—Ä–µ–º—è:</strong> 15:00</p>
                </div>

                <p><i>–£–±–µ–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ—Å—å–±–∞ –Ω–µ –∑–∞–±—ã—Ç—å —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –∂–µ–ª–∞–Ω–∏–µ –ø–æ–ª—É—á–∏—Ç—å —Ö–æ—Ä–æ—à–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è!</i></p>

                <div style="margin-bottom: 40px;" class="map-container">
                    <iframe
                        src="https://yandex.ru/map-widget/v1/?ll=44.503213%2C48.762597&mode=search&ol=geo&ouri=ymapsbm1%3A%2F%2Fgeo%3Fdata%3DCgg1NzgxOTk2MBJZ0KDQvtGB0YHQuNGPLCDQktC-0LvQs9C-0LPRgNCw0LQsINCo0LXQutGB0L3QuNC90YHQutCw0Y8g0YPQu9C40YbQsCwgNDYsINC_0L7QtNGK0LXQt9C0IDMiCg3dAzJCFR0NQ0Iwo6T88As%2C&z=18.6"
                        frameborder="0" allowfullscreen="true" title="–ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∑–¥–∞ –∫ –º–µ—Å—Ç—É –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏—è">
                    </iframe>
                </div>

                <div class="ticket-btn-container">
                    <button class="ticket-btn" onclick="printTicket()">
                        –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –±–∏–ª–µ—Ç –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫
                    </button>
                </div>

                <div class="photo-booth">
                    <div id="ticket" class="ticket" hidden>
                        <div class="ticket-content">
                            <div class="ticket-title printing-text">–ë–∏–ª–µ—Ç –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</div>
                            <div class="ticket-details">
                                <p class="printing-text">üìÖ –î–∞—Ç–∞: 26 –∞–≤–≥—É—Å—Ç–∞ 2025</p>
                                <p class="printing-text">‚è∞ –í—Ä–µ–º—è: 15:00</p>
                                <p class="printing-text">üìç –ê–¥—Ä–µ—Å: —É–ª. –®–µ–∫—Å–Ω–∏–Ω—Å–∫–∞—è,</p>
                                <p class="printing-text">–¥. 46, 3 –ø, –∫–≤. 87</p>
                                <p class="printing-text">üéÅ –ù–µ –∑–∞–±—É–¥—å —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <p style="font-family: 'MyCottageFont'; font-size: xx-large;">–° –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥—É –≤—Å—Ç—Ä–µ—á–∏!</p>

            <img style="margin-bottom: 0;" width=80% src="minime.png" alt="–ú–∏–Ω–∏-—è" loading="lazy">
            <p style="margin-top: 20px; font-family: 'MyCottageFont'; font-size:x-large;">–° –ª—é–±–æ–≤—å—é, –≤–∞—à–∞ –≠–ª—è </p>

        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ -->
    <div id="hintContainer"></div>

    <audio id="backgroundMusic" loop preload="metadata">
        <source src="Barbie-12-Dancing-Princesses-Theme-Audio-Barbie-in-the-12-Da.m4a" type="audio/mp4">
        <source src="Barbie-12-Dancing-Princesses-Theme-Audio-Barbie-in-the-12-Da.mp3" type="audio/mpeg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
    </audio>

    <script>
        // –£–ª—É—á—à–µ–Ω–Ω—ã–π JavaScript –∫–æ–¥
        const music = document.getElementById('backgroundMusic');
        const pinMusicIcon = document.getElementById('pinMusicIcon');
        const envelopeWrapper = document.getElementById('envelopeWrapper');
        const modal = document.getElementById('congratulationModal');
        const hintContainer = document.getElementById('hintContainer');
        let isMusicPlaying = false;
        let soundWaves = null;
        let isEnvelopeOpen = false;
        let hintTimers = [];
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
        music.volume = 0.5;

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫
        function createHint(text, position, targetElement, placement = 'top', delay = 0) {
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
            clearAllHints();
            
            const timer = setTimeout(() => {
                const hint = document.createElement('div');
                hint.className = `hint hint-${placement}`;
                hint.innerHTML = `${text}<span class="hint-close" onclick="removeHint(this.parentElement)">&times;</span>`;
                
                hintContainer.appendChild(hint);
                
                // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
                positionHint(hint, targetElement, placement);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                setTimeout(() => {
                    hint.classList.add('visible');
                }, 100);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
                hint.dataset.hintId = `hint-${Date.now()}`;
            }, delay);
            
            hintTimers.push(timer);
            return timer;
        }
        
        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
        function positionHint(hint, targetElement, placement) {
            const targetRect = targetElement.getBoundingClientRect();
            const hintRect = hint.getBoundingClientRect();
            
            switch(placement) {
                case 'top':
                    hint.style.top = `${targetRect.top - hintRect.height - 15}px`;
                    hint.style.left = `${targetRect.left + (targetRect.width - hintRect.width) / 2}px`;
                    break;
                case 'bottom':
                    hint.style.top = `${targetRect.bottom + 15}px`;
                    hint.style.left = `${targetRect.left + (targetRect.width - hintRect.width) / 2}px`;
                    break;
                case 'left':
                    hint.style.top = `${targetRect.top + (targetRect.height - hintRect.height) / 2}px`;
                    hint.style.left = `${targetRect.left - hintRect.width - 15}px`;
                    break;
                case 'right':
                    hint.style.top = `${targetRect.top + (targetRect.height - hintRect.height) / 2}px`;
                    hint.style.left = `${targetRect.right + 15}px`;
                    break;
            }
        }
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
        function removeHint(hintElement) {
            hintElement.classList.remove('visible');
            setTimeout(() => {
                if (hintElement.parentElement) {
                    hintElement.parentElement.removeChild(hintElement);
                }
            }, 500);
        }
        
        // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫
        function clearAllHints() {
            hintContainer.innerHTML = '';
            hintTimers.forEach(timer => clearTimeout(timer));
            hintTimers = [];
        }
        
        // –ü–æ–∫–∞–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
        function showHints() {
            // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –Ω–∞–∂–∞—Ç—å –Ω–∞ —à—Ç–∞–º–ø (—á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã)
            createHint('–ù–∞–∂–º–∏ –Ω–∞ —à—Ç–∞–º–ø, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç', 'top', document.querySelector('.pin'), 'top', 3000);
            
            // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –ø–∏—Å—å–º–æ (—á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥, –µ—Å–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã—Ç)
            setTimeout(() => {
                if (!isEnvelopeOpen) {
                    createHint('–ó–∞—Ç–µ–º –Ω–∞–∂–º–∏ –Ω–∞ –ø–∏—Å—å–º–æ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ', 'bottom', document.querySelector('.letter'), 'bottom');
                }
            }, 10000);
        }
        
        // –ü–æ–∫–∞–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–æ –±–∏–ª–µ—Ç –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function showTicketHint() {
            // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –±–∏–ª–µ—Ç (—á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞)
            createHint('–ù–µ –∑–∞–±—É–¥—å —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –±–∏–ª–µ—Ç –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫!', 'top', document.querySelector('.ticket-btn'), 'top', 5000);
        }

        function openEnvelope() {
            if (!isEnvelopeOpen) {
                envelopeWrapper.classList.add('open');
                isEnvelopeOpen = true;
                
                // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                clearAllHints();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–æ –ø–∏—Å—å–º–æ
                createHint('–¢–µ–ø–µ—Ä—å –Ω–∞–∂–º–∏ –Ω–∞ –ø–∏—Å—å–º–æ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ', 'bottom', document.querySelector('.letter'), 'bottom', 1000);
                
                // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –º—É–∑—ã–∫—É —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π promise
                const playPromise = music.play();
                
                if (playPromise !== undefined) {
                    playPromise
                        .then(() => {
                            // –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –Ω–∞—á–∞–ª–æ—Å—å
                            pinMusicIcon.classList.replace('fa-music', 'fa-volume-up');
                            isMusicPlaying = true;

                            if (!soundWaves) {
                                soundWaves = document.createElement('div');
                                soundWaves.className = 'sound-waves';
                                document.querySelector('.pin').appendChild(soundWaves);
                            }
                        })
                        .catch(error => {
                            console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç.');
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
                            pinMusicIcon.classList.add('fa-lock'); // –ò–∫–æ–Ω–∫–∞ –∑–∞–º–∫–∞ –≤–º–µ—Å—Ç–æ –º—É–∑—ã–∫–∏
                        });
                }
            }
        }

        function openModal() {
            if (isEnvelopeOpen) {
                modal.hidden = false;
                document.body.style.overflow = 'hidden';
                document.documentElement.style.overflow = 'hidden';
                startCountdown();
                
                // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                clearAllHints();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–æ –±–∏–ª–µ—Ç
                showTicketHint();
                
                // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
                modal.focus();
            }
        }

        function closeModal() {
            modal.hidden = true;
            document.body.style.overflow = '';
            document.documentElement.style.overflow = '';
            
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
            clearAllHints();
        }

        function scrollToTicket() {
            const ticket = document.getElementById('ticket');
            if (ticket) {
                ticket.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }

        function createConfetti() {
            const colors = ['#f8d7da', '#d4a5a7', '#a76c6e', '#f8c6c9', '#f4b6ba'];
            const confettiContainer = document.createElement('div');
            confettiContainer.style.position = 'fixed';
            confettiContainer.style.top = '0';
            confettiContainer.style.left = '0';
            confettiContainer.style.width = '100%';
            confettiContainer.style.height = '100%';
            confettiContainer.style.pointerEvents = 'none';
            confettiContainer.style.zIndex = '10001'; // –ü–æ–≤–µ—Ä—Ö –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            
            document.body.appendChild(confettiContainer);

            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.position = 'absolute';
                confetti.style.left = Math.random() * 100 + 'vw';
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.backgroundColor = randomColor;
                confetti.style.border = `2px solid ${randomColor}`;
                confetti.style.animation = `confettiFall ${Math.random() * 3 + 2}s linear forwards`;
                confetti.style.width = Math.random() * 15 + 5 + 'px';
                confetti.style.height = Math.random() * 15 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confettiContainer.appendChild(confetti);
            }

            setTimeout(() => {
                document.body.removeChild(confettiContainer);
            }, 5000);
        }

        function printTicket() {
            const ticket = document.getElementById('ticket');
            const ticketBtn = document.querySelector('.ticket-btn');
            const photoBooth = document.querySelector('.photo-booth');

            photoBooth.style.height = '280px';
            ticket.hidden = false;
            ticket.style.animation = 'printTicket 1.5s forwards';

            const printingTexts = document.querySelectorAll('.printing-text');
            printingTexts.forEach((text, index) => {
                text.style.animation = `typing 0.5s ${index * 0.3}s forwards`;
            });

            setTimeout(() => {
                scrollToTicket();
            }, 500);

            ticketBtn.textContent = '–ë–∏–ª–µ—Ç –ø–æ–ª—É—á–µ–Ω!';
            ticketBtn.style.background = 'linear-gradient(145deg, #a76c6e, #d4a5a7)';
            ticketBtn.disabled = true;

            createConfetti();

            // –°–æ–∑–¥–∞–µ–º –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            const playSound = (src) => {
                const audio = new Audio();
                audio.src = src;
                audio.volume = 0.7;
                const playPromise = audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.catch(e => {
                        console.log('–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –±—ã–ª–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ');
                    });
                }
            };

            playSound('pop.mp3');
            setTimeout(() => playSound('print-sound.mp3'), 300);
            
            // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
            clearAllHints();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
            
            // Space –∏–ª–∏ Enter –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
            if ((event.key === ' ' || event.key === 'Enter') && 
                event.target.classList.contains('pin')) {
                event.preventDefault();
                openEnvelope();
            }
        });

        function startCountdown() {
            const eventDate = new Date(new Date().getFullYear(), 7, 26, 15, 0, 0);

            // –ï—Å–ª–∏ –¥–∞—Ç–∞ —É–∂–µ –ø—Ä–æ—à–ª–∞ –≤ —ç—Ç–æ–º –≥–æ–¥—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é
            if (eventDate < new Date()) {
                eventDate.setFullYear(eventDate.getFullYear() + 1);
            }

            function updateCountdown() {
                const now = new Date();
                const diff = eventDate - now;

                if (diff <= 0) {
                    document.getElementById('days').textContent = '00';
                    document.getElementById('hours').textContent = '00';
                    document.getElementById('minutes').textContent = '00';
                    document.getElementById('seconds').textContent = '00';
                    document.querySelector('.countdown-title').textContent = '–ü—Ä–∞–∑–¥–Ω–∏–∫ —É–∂–µ –Ω–∞—Å—Ç—É–ø–∏–ª!';
                    return;
                }

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');

                requestAnimationFrame(updateCountdown);
            }

            updateCountdown();
        }
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –≤–∞–∂–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
            const preloadResources = ['pop.mp3', 'print-sound.mp3'];
            
            preloadResources.forEach(resource => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.href = resource;
                link.as = 'audio';
                document.head.appendChild(link);
            });
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.setAttribute('aria-hidden', 'true');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
            setTimeout(showHints, 1000);
        });
    </script>
</body>

</html>
